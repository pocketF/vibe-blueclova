<!-- ë™ì˜ìƒ ë©”ì‹œì§€ ì¶”ê°€í•˜ê¸° ë²„íŠ¼ -->
<!-- êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ ê·¼ì²˜ì— ë°°ì¹˜í•  HTML ì½”ë“œ -->
<div class="video-message-wrapper">
    <a href="#" class="btn-video-message" onclick="openVideoMessageModal(); return false;">
        <span class="video-icon">ğŸ¥</span>
        <span class="video-text">ë™ì˜ìƒ ë©”ì‹œì§€ ì¶”ê°€í•˜ê¸°</span>
    </a>
</div>

<!-- ë™ì˜ìƒ ë©”ì‹œì§€ ëª¨ë‹¬ (ì„ íƒì‚¬í•­) -->
<div id="videoMessageModal" class="video-modal" style="display: none;">
    <div class="video-modal-content">
        <span class="video-modal-close" onclick="closeVideoMessageModal()">&times;</span>
        <h3>ë™ì˜ìƒ ë©”ì‹œì§€ ì¶”ê°€</h3>
        <div class="video-upload-area">
            <input type="file" id="videoFile" accept="video/*" style="display: none;">
            <label for="videoFile" class="video-upload-label">
                <span class="upload-icon">ğŸ“¹</span>
                <span>ë™ì˜ìƒ íŒŒì¼ ì„ íƒ</span>
            </label>
        </div>
        <div class="video-preview" id="videoPreview" style="display: none;">
            <video id="previewVideo" controls style="max-width: 100%; max-height: 300px;"></video>
        </div>
        <div class="video-modal-actions">
            <button type="button" class="btn-cancel" onclick="closeVideoMessageModal()">ì·¨ì†Œ</button>
            <button type="button" class="btn-submit" onclick="submitVideoMessage()">ì¶”ê°€í•˜ê¸°</button>
        </div>
    </div>
</div>

<script>
function openVideoMessageModal() {
    document.getElementById('videoMessageModal').style.display = 'flex';
}

function closeVideoMessageModal() {
    document.getElementById('videoMessageModal').style.display = 'none';
    document.getElementById('videoPreview').style.display = 'none';
    document.getElementById('videoFile').value = '';
}

document.getElementById('videoFile').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const preview = document.getElementById('videoPreview');
        const video = document.getElementById('previewVideo');
        const url = URL.createObjectURL(file);
        video.src = url;
        preview.style.display = 'block';
    }
});

function submitVideoMessage() {
    const file = document.getElementById('videoFile').files[0];
    if (file) {
        // ì—¬ê¸°ì— ë™ì˜ìƒ ì—…ë¡œë“œ ë¡œì§ ì¶”ê°€
        alert('ë™ì˜ìƒ ë©”ì‹œì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        closeVideoMessageModal();
    } else {
        alert('ë™ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
    }
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
window.onclick = function(event) {
    const modal = document.getElementById('videoMessageModal');
    if (event.target == modal) {
        closeVideoMessageModal();
    }
}
</script>
