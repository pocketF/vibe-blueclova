<!-- ì¹´í˜24 ìƒí’ˆ ìƒì„¸í˜ì´ì§€ì— ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ ë²„íŠ¼ ì½”ë“œ -->
<!-- êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ ì˜ì—­ ê·¼ì²˜ì— ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš” -->

<style>
/* ë™ì˜ìƒ ë©”ì‹œì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.video-message-btn-area {
    margin: 15px 0;
    text-align: center;
}

.btn-video-message {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 14px 28px;
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    color: #fff !important;
    text-decoration: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: -0.3px;
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    min-width: 200px;
}

.btn-video-message:hover {
    background: linear-gradient(135deg, #FFA500 0%, #FF8C00 100%);
    box-shadow: 0 6px 16px rgba(255, 215, 0, 0.4);
    transform: translateY(-2px);
    color: #fff !important;
    text-decoration: none;
}

.btn-video-message:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
}

.btn-video-message .video-icon {
    font-size: 18px;
    display: inline-block;
}

/* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
#videoMessageModal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.video-modal-content {
    background-color: #fff;
    padding: 30px;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        transform: translateY(30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.video-modal-close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 28px;
    font-weight: bold;
    color: #999;
    cursor: pointer;
    line-height: 1;
    transition: color 0.2s ease;
}

.video-modal-close:hover {
    color: #333;
}

.video-modal-content h3 {
    margin: 0 0 20px 0;
    color: #333;
    font-size: 20px;
    font-weight: 600;
}

.video-upload-area {
    margin: 20px 0;
    padding: 40px;
    border: 2px dashed #FFD700;
    border-radius: 8px;
    text-align: center;
    background-color: #FFFEF5;
    transition: all 0.3s ease;
}

.video-upload-area:hover {
    border-color: #FFA500;
    background-color: #FFFEF0;
}

.video-upload-label {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    color: #666;
    font-size: 14px;
}

.upload-icon {
    font-size: 32px;
}

.video-preview {
    margin: 20px 0;
    text-align: center;
}

.video-modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
}

.btn-cancel,
.btn-submit {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background-color: #f5f5f5;
    color: #666;
}

.btn-cancel:hover {
    background-color: #e0e0e0;
}

.btn-submit {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    color: #fff;
    box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
}

.btn-submit:hover {
    background: linear-gradient(135deg, #FFA500 0%, #FF8C00 100%);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
}

@media (max-width: 768px) {
    .btn-video-message {
        width: 100%;
        padding: 12px 24px;
        font-size: 14px;
    }
    
    .video-modal-content {
        padding: 20px;
        width: 95%;
    }
    
    .video-upload-area {
        padding: 30px 20px;
    }
}

/* Blue Clova ì˜ì—­ ê¸°ë³¸ ìˆ¨ê¹€ */
#blue-clova-area {
    display: none;
}
</style>

<!-- Blue Clova ì˜ì—­ (ê¸°ë³¸ ìˆ¨ê¹€, íŠ¹ì • ìƒí’ˆë²ˆí˜¸ì—ì„œë§Œ í‘œì‹œ) -->
<div id="blue-clova-area">
    <!-- ë²„íŠ¼ HTML (êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ ê·¼ì²˜ì— ë°°ì¹˜) -->
    <div class="video-message-btn-area">
        <a href="#" class="btn-video-message" onclick="openVideoMessageModal(); return false;">
            <span class="video-icon">ğŸ¥</span>
            <span class="video-text">ë™ì˜ìƒ ë©”ì‹œì§€ ì¶”ê°€í•˜ê¸°</span>
        </a>
    </div>

    <!-- ë™ì˜ìƒ ë©”ì‹œì§€ ëª¨ë‹¬ -->
    <div id="videoMessageModal" class="video-modal">
        <div class="video-modal-content">
            <span class="video-modal-close" onclick="closeVideoMessageModal()">&times;</span>
            <h3>ë™ì˜ìƒ ë©”ì‹œì§€ ì¶”ê°€</h3>
            <div class="video-upload-area">
                <input type="file" id="videoFile" accept="video/*" style="display: none;">
                <label for="videoFile" class="video-upload-label">
                    <span class="upload-icon">ğŸ“¹</span>
                    <span>ë™ì˜ìƒ íŒŒì¼ ì„ íƒ</span>
                </label>
            </div>
            <div class="video-preview" id="videoPreview" style="display: none;">
                <video id="previewVideo" controls style="max-width: 100%; max-height: 300px;"></video>
            </div>
            <div class="video-modal-actions">
                <button type="button" class="btn-cancel" onclick="closeVideoMessageModal()">ì·¨ì†Œ</button>
                <button type="button" class="btn-submit" onclick="submitVideoMessage()">ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>
    </div>
</div>

<script>
// ì¹´í˜24 ìƒí’ˆë²ˆí˜¸ í™•ì¸ ë° Blue Clova ì˜ì—­ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
(function() {
    // ì¹´í˜24 ìƒí’ˆë²ˆí˜¸ ë³€ìˆ˜ (ì˜ˆ: '368')
    // ì¹´í˜24ì—ì„œëŠ” {$product_no} ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, ì‹¤ì œ í˜ì´ì§€ì—ì„œ ì´ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
    // ë°©ë²• 1: ì¹´í˜24 ë³€ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš© (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§)
    var productNo = '{$product_no}'; // ì¹´í˜24 ë³€ìˆ˜
    
    // ë°©ë²• 2: URLì—ì„œ ìƒí’ˆë²ˆí˜¸ ì¶”ì¶œ (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ)
    // var productNo = getProductNoFromUrl();
    
    // í‘œì‹œí•  ìƒí’ˆë²ˆí˜¸ ëª©ë¡ (ì—¬ëŸ¬ ìƒí’ˆë²ˆí˜¸ë¥¼ ë°°ì—´ë¡œ ê´€ë¦¬ ê°€ëŠ¥)
    var allowedProductNos = ['368']; // í•„ìš”ì‹œ ë” ì¶”ê°€: ['368', '369', '370']
    
    // ìƒí’ˆë²ˆí˜¸ í™•ì¸ í›„ ì˜ì—­ í‘œì‹œ
    if (allowedProductNos.indexOf(productNo) !== -1 || allowedProductNos.includes(productNo)) {
        var blueClovaArea = document.getElementById('blue-clova-area');
        if (blueClovaArea) {
            blueClovaArea.style.display = 'block';
        }
    }
    
    // URLì—ì„œ ìƒí’ˆë²ˆí˜¸ ì¶”ì¶œ í•¨ìˆ˜ (ë°©ë²• 2ìš©)
    function getProductNoFromUrl() {
        var url = window.location.href;
        var match = url.match(/product[\/\-_](\d+)/i);
        if (match && match[1]) {
            return match[1];
        }
        // ë‹¤ë¥¸ íŒ¨í„´ ì‹œë„
        match = url.match(/no=(\d+)/i);
        if (match && match[1]) {
            return match[1];
        }
        return null;
    }
})();

function openVideoMessageModal() {
    document.getElementById('videoMessageModal').style.display = 'flex';
}

function closeVideoMessageModal() {
    document.getElementById('videoMessageModal').style.display = 'none';
    document.getElementById('videoPreview').style.display = 'none';
    document.getElementById('videoFile').value = '';
}

document.addEventListener('DOMContentLoaded', function() {
    var videoFileInput = document.getElementById('videoFile');
    if (videoFileInput) {
        videoFileInput.addEventListener('change', function(e) {
            var file = e.target.files[0];
            if (file) {
                var preview = document.getElementById('videoPreview');
                var video = document.getElementById('previewVideo');
                var url = URL.createObjectURL(file);
                video.src = url;
                preview.style.display = 'block';
            }
        });
    }
});

function submitVideoMessage() {
    var fileInput = document.getElementById('videoFile');
    if (fileInput && fileInput.files[0]) {
        // ì—¬ê¸°ì— ë™ì˜ìƒ ì—…ë¡œë“œ ë¡œì§ ì¶”ê°€
        // ì¹´í˜24 API ë˜ëŠ” ì„œë²„ ì—…ë¡œë“œ ì²˜ë¦¬
        alert('ë™ì˜ìƒ ë©”ì‹œì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        closeVideoMessageModal();
    } else {
        alert('ë™ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
    }
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
window.onclick = function(event) {
    var modal = document.getElementById('videoMessageModal');
    if (event.target == modal) {
        closeVideoMessageModal();
    }
}
</script>
